# AuthHub - ç»Ÿä¸€ç”¨æˆ·æˆæƒç³»ç»Ÿ

<p align="center">
  <img src="https://nestjs.com/img/logo-small.svg" width="100" alt="Nest Logo" />
  <img src="https://assets.vercel.com/image/upload/v1662130559/nextjs/Icon_light_background.png" width="100" alt="Next.js Logo" style="margin-left: 20px;" />
</p>

åŸºäº NestJSã€Next.js å’Œ React æ„å»ºçš„ä¼ä¸šçº§ç»Ÿä¸€ç”¨æˆ·æˆæƒå’Œèº«ä»½ç®¡ç†ç³»ç»Ÿ Monorepo é¡¹ç›®ã€‚

## ğŸ“¦ é¡¹ç›®ç»“æ„

æ­¤ monorepo åŒ…å«ä»¥ä¸‹é¡¹ç›®ï¼š

### åç«¯åº”ç”¨ (NestJS)

#### [server](./apps/server) | [ğŸ“– æ–‡æ¡£](./apps/server/README.md)
ç»Ÿä¸€æˆæƒåç«¯æœåŠ¡ï¼Œæä¾›å®Œæ•´çš„ç”¨æˆ·è®¤è¯ã€æˆæƒå’Œç®¡ç†åŠŸèƒ½ã€‚
- ğŸ” **ç”¨æˆ·è®¤è¯** - ç™»å½•ã€æ³¨å†Œã€å¯†ç é‡ç½®
- ğŸ”‘ **Token ç®¡ç†** - JWT Token ç”Ÿæˆå’ŒéªŒè¯
- ğŸ‘¥ **è´¦å·ç®¡ç†** - ç”¨æˆ·ä¿¡æ¯ã€æƒé™ç®¡ç†
- ğŸ”’ **OTP æ”¯æŒ** - åŒå› ç´ è®¤è¯ï¼ˆ2FAï¼‰
- ğŸ“§ **é‚®ä»¶æœåŠ¡** - éªŒè¯ç å‘é€ã€é€šçŸ¥é‚®ä»¶
- â˜ï¸ **èµ„æºç®¡ç†** - æ–‡ä»¶ä¸Šä¼ ã€å¤´åƒå­˜å‚¨
- ğŸŒ **å›½é™…åŒ–** - å¤šè¯­è¨€æ”¯æŒï¼ˆä¸­è‹±æ–‡ï¼‰
- ğŸ“ **Swagger æ–‡æ¡£** - è‡ªåŠ¨ç”Ÿæˆ API æ–‡æ¡£

### å‰ç«¯åº”ç”¨ (Next.js)

#### [@meta-1/web-authub](./apps/web) | [ğŸ“– æ–‡æ¡£](./apps/web/README.md)
ç»Ÿä¸€ç”¨æˆ·æˆæƒå¹³å°å‰ç«¯åº”ç”¨ã€‚
- ğŸ” **ç”¨æˆ·è®¤è¯** - ç™»å½•ã€æ³¨å†Œã€å¯†ç é‡ç½®ç•Œé¢
- ğŸ‘¤ **ç”¨æˆ·ç®¡ç†** - ä¸ªäººèµ„æ–™ã€è´¦å·è®¾ç½®ã€å®‰å…¨ç®¡ç†
- ğŸ”’ **åŒå› ç´ è®¤è¯** - OTPã€Google Authenticator æ”¯æŒ
- ğŸ–¼ï¸ **å¤´åƒç®¡ç†** - ä¸Šä¼ ã€è£å‰ªã€é¢„è§ˆ
- ğŸ¨ **ç°ä»£ UI** - åŸºäº @meta-1/design ç»„ä»¶åº“
- ğŸŒ **å›½é™…åŒ–** - æ”¯æŒå¤šè¯­è¨€åˆ‡æ¢
- ğŸŒ— **ä¸»é¢˜åˆ‡æ¢** - æ˜æš—ä¸»é¢˜æ”¯æŒ
- ğŸ“± **å“åº”å¼è®¾è®¡** - å®Œç¾é€‚é…å„ç§è®¾å¤‡

### åç«¯åº“

#### [@meta-1/lib-account](./libs/account) | [ğŸ“– æ–‡æ¡£](./libs/account/README.md)
è´¦å·ç®¡ç†æ ¸å¿ƒæ¨¡å—ã€‚

**ç‰¹æ€§ï¼š**
- ğŸ‘¥ **ç”¨æˆ·ç®¡ç†** - ç”¨æˆ· CRUD æ“ä½œ
- ğŸ” **è®¤è¯æœåŠ¡** - ç™»å½•ã€æ³¨å†Œã€Token ç®¡ç†
- ğŸ”’ **OTP ç®¡ç†** - åŒå› ç´ è®¤è¯ç®¡ç†
- ğŸ›¡ï¸ **æƒé™æ§åˆ¶** - åŸºäºè§’è‰²çš„è®¿é—®æ§åˆ¶ï¼ˆRBACï¼‰
- ğŸ“Š **åº”ç”¨ç®¡ç†** - å¤šåº”ç”¨æ”¯æŒ
- ğŸ”„ **ä¼šè¯ç®¡ç†** - ç”¨æˆ·ä¼šè¯è·Ÿè¸ª

#### [@meta-1/lib-types](./libs/types) | [ğŸ“– æ–‡æ¡£](./libs/types/README.md)
å…±äº«ç±»å‹å®šä¹‰å’Œ Zod Schemaã€‚

**ç‰¹æ€§ï¼š**
- ğŸ›¡ï¸ **ç±»å‹å®‰å…¨** - TypeScript ç±»å‹å®šä¹‰
- âœ… **æ•°æ®éªŒè¯** - Zod Schema éªŒè¯
- ğŸ”„ **å…±äº«å¤ç”¨** - å‰åç«¯å…±äº«ç±»å‹
- ğŸ“ **è´¦å·ç±»å‹** - ç”¨æˆ·ã€OTP ç›¸å…³ç±»å‹

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚

- Node.js >= 18
- pnpm >= 8
- Redis >= 6.0
- MySQL >= 8.0
- Nacos >= 2.0 (å¯é€‰)

### å®‰è£…ä¾èµ–

```bash
# å…‹éš†ä»“åº“
git clone <repository-url>
cd authub

# å®‰è£…ä¾èµ–
pnpm install
```

### é¡¹ç›®ç»“æ„

```
authub/
â”œâ”€â”€ apps/                        # åº”ç”¨ç¨‹åº
â”‚   â”œâ”€â”€ server/                 # NestJS åç«¯æœåŠ¡
â”‚   â””â”€â”€ web/                    # Next.js å‰ç«¯åº”ç”¨
â”œâ”€â”€ libs/                        # åç«¯åº“
â”‚   â”œâ”€â”€ account/                # è´¦å·ç®¡ç†æ¨¡å—
â”‚   â””â”€â”€ types/                  # ç±»å‹å®šä¹‰
â”œâ”€â”€ locales/                     # å›½é™…åŒ–è¯­è¨€æ–‡ä»¶
â”‚   â”œâ”€â”€ en.json
â”‚   â””â”€â”€ zh-CN.json
â”œâ”€â”€ scripts/                     # æ„å»ºå’Œå·¥å…·è„šæœ¬
â”‚   â””â”€â”€ sync-locales-cli.ts
â””â”€â”€ package.json
```

## ğŸ› ï¸ å¼€å‘æŒ‡å—

### å¯ç”¨å‘½ä»¤

#### åç«¯å¼€å‘

```bash
# å¼€å‘æ¨¡å¼è¿è¡Œåç«¯æœåŠ¡
pnpm run dev:server            # å¯åŠ¨ server (ç«¯å£: 3100)

# æ„å»ºåç«¯æœåŠ¡
pnpm run build:server          # æ„å»º server

# å¯åŠ¨ç”Ÿäº§æœåŠ¡
pnpm run start:server          # è¿è¡Œæ„å»ºåçš„æœåŠ¡
```

#### å‰ç«¯å¼€å‘

```bash
# å¼€å‘æ¨¡å¼è¿è¡Œå‰ç«¯åº”ç”¨
pnpm run dev:web               # å¯åŠ¨ web-authub (ç«¯å£: 4002)

# æ„å»ºå‰ç«¯åº”ç”¨
pnpm run build:web             # æ„å»º web-authub
```

#### å·¥å…·å‘½ä»¤

```bash
# åŒæ­¥è¯­è¨€æ–‡ä»¶
pnpm run sync:locales

# ä»£ç æ£€æŸ¥å’Œæ ¼å¼åŒ–
pnpm run lint                  # è¿è¡Œä»£ç æ£€æŸ¥
pnpm run format                # æ ¼å¼åŒ–ä»£ç 

# æµ‹è¯•
pnpm run test                  # è¿è¡Œå•å…ƒæµ‹è¯•
pnpm run test:watch            # ç›‘å¬æ¨¡å¼è¿è¡Œæµ‹è¯•
pnpm run test:cov              # è¿è¡Œæµ‹è¯•å¹¶ç”Ÿæˆè¦†ç›–ç‡æŠ¥å‘Š
```

## ğŸ“š æ–‡æ¡£å¯¼èˆª

### åº”ç”¨æ–‡æ¡£
- [AuthHub Server](./apps/server/README.md) - åç«¯æœåŠ¡å®Œæ•´æ–‡æ¡£
- [AuthHub Web](./apps/web/README.md) - å‰ç«¯åº”ç”¨å®Œæ•´æ–‡æ¡£

### åº“æ–‡æ¡£
- [@meta-1/lib-account](./libs/account/README.md) - è´¦å·ç®¡ç†ã€è®¤è¯ã€OTPã€æƒé™æ§åˆ¶
- [@meta-1/lib-types](./libs/types/README.md) - ç±»å‹å®šä¹‰å’Œ Schema

### ä¾èµ–çš„å¤–éƒ¨åº“

æ­¤é¡¹ç›®ä½¿ç”¨äº†æ¥è‡ª `@meta-1` ç»„ç»‡çš„å…±äº«åº“ï¼ˆé€šè¿‡ npm å®‰è£…ï¼‰ï¼š
- **@meta-1/nest-common** - é€šç”¨å·¥å…·å’Œè£…é¥°å™¨
- **@meta-1/nest-security** - å®‰å…¨è®¤è¯æ¨¡å—
- **@meta-1/nest-message** - é‚®ä»¶æœåŠ¡
- **@meta-1/nest-nacos** - Nacos é›†æˆ
- **@meta-1/nest-assets** - èµ„æºç®¡ç†
- **@meta-1/nest-types** - åŸºç¡€ç±»å‹å®šä¹‰
- **@meta-1/design** - UI ç»„ä»¶åº“
- **@meta-1/editor** - å¯Œæ–‡æœ¬ç¼–è¾‘å™¨

## ğŸ”§ é…ç½®

é¡¹ç›®é‡‡ç”¨ Nacos é…ç½®ä¸­å¿ƒç»Ÿä¸€ç®¡ç†é…ç½®ï¼š
- ç¯å¢ƒå˜é‡åªéœ€é…ç½® Nacos è¿æ¥ä¿¡æ¯
- æ‰€æœ‰ä¸šåŠ¡é…ç½®ï¼ˆæ•°æ®åº“ã€Redisã€è´¦å·é…ç½®ç­‰ï¼‰é€šè¿‡ Nacos ç®¡ç†
- æ”¯æŒé…ç½®çƒ­æ›´æ–°å’Œç¯å¢ƒéš”ç¦»
- Nacos ä¸å¯ç”¨æ—¶æ”¯æŒé™çº§å¯åŠ¨

è¯¦ç»†é…ç½®è¯´æ˜è¯·æŸ¥çœ‹ [server æ–‡æ¡£](./apps/server/README.md)

## ğŸ§ª æµ‹è¯•

```bash
# è¿è¡Œå•å…ƒæµ‹è¯•
pnpm run test

# ç›‘å¬æ¨¡å¼è¿è¡Œæµ‹è¯•
pnpm run test:watch

# ç”Ÿæˆè¦†ç›–ç‡æŠ¥å‘Š
pnpm run test:cov
```


## ğŸ› ï¸ æŠ€æœ¯æ ˆ

### åç«¯
- **NestJS 11** - ä¼ä¸šçº§ Node.js æ¡†æ¶
- **TypeScript 5** - ç±»å‹å®‰å…¨çš„ JavaScript
- **Redis** - ç¼“å­˜å’Œä¼šè¯å­˜å‚¨ï¼ˆioredisï¼‰
- **TypeORM** - ORM æ¡†æ¶
- **MySQL** - å…³ç³»å‹æ•°æ®åº“
- **Nacos** - é…ç½®ç®¡ç†å’ŒæœåŠ¡å‘ç°
- **Zod** - æ•°æ®éªŒè¯å’Œ Schema å®šä¹‰
- **AWS SDK** - AWS SESã€S3 ç­‰äº‘æœåŠ¡
- **Aliyun SDK** - é˜¿é‡Œäº‘ OSSã€é‚®ä»¶æ¨é€ç­‰

### å‰ç«¯
- **Next.js 16** - React åº”ç”¨æ¡†æ¶
- **React 19** - UI åº“
- **TypeScript 5** - ç±»å‹å®‰å…¨
- **Tailwind CSS 4** - åŸå­åŒ– CSS æ¡†æ¶
- **@meta-1/design** - UI ç»„ä»¶åº“
- **Recoil** - çŠ¶æ€ç®¡ç†
- **React Query** - æ•°æ®è·å–å’Œç¼“å­˜
- **i18next** - å›½é™…åŒ–
- **JSEncrypt** - RSA åŠ å¯†
- **Zod** - æ•°æ®éªŒè¯

### å·¥å…·
- **pnpm** - é«˜æ•ˆçš„åŒ…ç®¡ç†å™¨
- **Biome** - å¿«é€Ÿçš„ä»£ç æ£€æŸ¥å’Œæ ¼å¼åŒ–å·¥å…·
- **Jest** - å•å…ƒæµ‹è¯•æ¡†æ¶

## ğŸ” å®‰å…¨ç‰¹æ€§

### åç«¯å®‰å…¨
- JWT Token è®¤è¯
- RSA å¯†ç åŠ å¯†ä¼ è¾“
- Redis ä¼šè¯ç®¡ç†
- OTP åŒå› ç´ è®¤è¯
- API æƒé™æ§åˆ¶
- SQL æ³¨å…¥é˜²æŠ¤
- XSS é˜²æŠ¤

### å‰ç«¯å®‰å…¨
- RSA åŠ å¯†æ•æ„Ÿæ•°æ®
- HTTPS ä¼ è¾“
- Token è‡ªåŠ¨åˆ·æ–°
- XSS é˜²æŠ¤
- CSRF é˜²æŠ¤

## ğŸš€ éƒ¨ç½²

### åç«¯éƒ¨ç½²

```bash
# æ„å»º
pnpm run build:server

# è¿è¡Œ
pnpm run start:server
```

### å‰ç«¯éƒ¨ç½²

```bash
# æ„å»º
pnpm run build:web

# å¯ä»¥éƒ¨ç½²åˆ° Vercelã€Netlify ç­‰å¹³å°
```

## ğŸ”§ æœ¬åœ°å¼€å‘é…ç½®

å¦‚æœéœ€è¦åœ¨æœ¬åœ°å¼€å‘æ—¶è¦†ç›–æŸäº›ä¾èµ–åŒ…ï¼Œåœ¨ `package.json` ä¸­æ·»åŠ ï¼š

```json
{
  "pnpm": {
    "overrides": {
      "@meta-1/nest-security": "file:../support/libs/security"
    }
  }
}
```

è¯¦ç»†è¯´æ˜è¯·å‚è€ƒé¡¹ç›®ä¸­çš„æœ¬åœ°é…ç½®æ–‡æ¡£ã€‚

## ğŸ“ è®¸å¯è¯

[MIT Licensed](LICENSE)

## ğŸ¤ è´¡çŒ®

æ¬¢è¿è´¡çŒ®ï¼è¯·éšæ—¶æäº¤ Pull Requestã€‚

## ğŸ“§ æ”¯æŒ

å¦‚æœ‰é—®é¢˜å’Œæ”¯æŒéœ€æ±‚ï¼Œè¯·åœ¨ä»“åº“ä¸­æäº¤ issueã€‚